(dxState_ColorSelector
   (view
      {do
         ($options
            {array 0})
         {push_back $options os_setguitarcol}
         {push_back $options os_setdrumcol}
         {push_back $options os_setprotarcol}
         {push_back $options os_emissivecolor}
         ;-----func----------state name---------message
         {dx_state_setup dxState_ColorSelector FALSE}
      }
      {overshell_view_chooser}
   )
   (SELECT_MSG
      {switch {$component selected_sym}
         (os_setguitarcol
            {$this show_state dxState_GuitarColorSelector}
         )
         (os_setdrumcol
            {$this show_state dxState_DrumColorSelector}
         )
         (os_setprotarcol
            {$this show_state dxState_ProtarColorSelector}
         )
         (os_emissivecolor
            {$this show_state dxState_rgbcolormenu}
         )
      }
   )
   (exit 
      {dx_state_pos_tracker}
   )
   (on_cancel
      {$this show_state dxState_TextureMenu}
   )
)

(dxState_GuitarColorSelector
   (view
      {do
         ($options
            {array 0})
         {push_back $options os_gems}
         {push_back $options os_sustains}
         {push_back $options os_smashers}
         ;-----func----------state name---------message
         {dx_state_setup dxState_DrumColorSelector FALSE}
      }
      {overshell_view_chooser}
   )
   (SELECT_MSG
      {switch {$component selected_sym}
         (os_gems
            {$this show_state dxState_GuitarGemColorSelector}
         )
         (os_sustains
            {$this show_state dxState_GuitarSustainColorSelector}
         )
         (os_smashers
            {$this show_state dxState_GuitarSmasherColorSelector}
         )
      }
   )
   (exit 
      {dx_state_pos_tracker}
   )
   (on_cancel
      {$this show_state dxState_ColorSelector}
   )
)


#define DX_GUITAR_GEM_COLOR_LIST
(
   {do
      ($options {array 0})
      {switch $dx_guitar_gem_color1
         (0 {push_back $options os_dx_1_green})
         (1 {push_back $options os_dx_1_red})
         (2 {push_back $options os_dx_1_yellow})
         (3 {push_back $options os_dx_1_blue})
         (4 {push_back $options os_dx_1_orange})
      }
      {switch $dx_guitar_gem_color2
         (0 {push_back $options os_dx_2_green})
         (1 {push_back $options os_dx_2_red})
         (2 {push_back $options os_dx_2_yellow})
         (3 {push_back $options os_dx_2_blue})
         (4 {push_back $options os_dx_2_orange})
      }
      {switch $dx_guitar_gem_color3
         (0 {push_back $options os_dx_3_green})
         (1 {push_back $options os_dx_3_red})
         (2 {push_back $options os_dx_3_yellow})
         (3 {push_back $options os_dx_3_blue})
         (4 {push_back $options os_dx_3_orange})
      }
      {switch $dx_guitar_gem_color4
         (0 {push_back $options os_dx_4_green})
         (1 {push_back $options os_dx_4_red})
         (2 {push_back $options os_dx_4_yellow})
         (3 {push_back $options os_dx_4_blue})
         (4 {push_back $options os_dx_4_orange})
      }
      {switch $dx_guitar_gem_color5
         (0 {push_back $options os_dx_5_green})
         (1 {push_back $options os_dx_5_red})
         (2 {push_back $options os_dx_5_yellow})
         (3 {push_back $options os_dx_5_blue})
         (4 {push_back $options os_dx_5_orange})
      }
      ;-----func----------state name---------message
      {dx_state_setup dxState_GuitarGemColorSelector FALSE}
   }
)

(dxState_GuitarGemColorSelector
   (view
      DX_GUITAR_GEM_COLOR_LIST
      {dx_state_setup dxState_GuitarGemColorSelector FALSE}
      {overshell_view_chooser}
   )
   (SELECT_MSG
      {switch {$component selected_sym}
         (
            (
               os_dx_1_green
               os_dx_1_red
               os_dx_1_yellow
               os_dx_1_blue
               os_dx_1_orange
            )
            {set $dx_guitar_gem_color1 {mod {+ $dx_guitar_gem_color1 1} 5}}
            {switch $dx_guitar_gem_color1
               (0 {set $dx_tracked_changed os_dx_1_green})
               (1 {set $dx_tracked_changed os_dx_1_red})
               (2 {set $dx_tracked_changed os_dx_1_yellow})
               (3 {set $dx_tracked_changed os_dx_1_blue})
               (4 {set $dx_tracked_changed os_dx_1_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_GEM_COLOR_LIST
            {set $previous_state dxState_GuitarGemColorSelector}
         )
         (
            (
               os_dx_2_green
               os_dx_2_red
               os_dx_2_yellow
               os_dx_2_blue
               os_dx_2_orange
            )
            {set $dx_guitar_gem_color2 {mod {+ $dx_guitar_gem_color2 1} 5}}
            {switch $dx_guitar_gem_color2
               (0 {set $dx_tracked_changed os_dx_2_green})
               (1 {set $dx_tracked_changed os_dx_2_red})
               (2 {set $dx_tracked_changed os_dx_2_yellow})
               (3 {set $dx_tracked_changed os_dx_2_blue})
               (4 {set $dx_tracked_changed os_dx_2_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_GEM_COLOR_LIST
            {set $previous_state dxState_GuitarGemColorSelector}
         )
         (
            (
               os_dx_3_green
               os_dx_3_red
               os_dx_3_yellow
               os_dx_3_blue
               os_dx_3_orange
            )
            {set $dx_guitar_gem_color3 {mod {+ $dx_guitar_gem_color3 1} 5}}
            {switch $dx_guitar_gem_color3
               (0 {set $dx_tracked_changed os_dx_3_green})
               (1 {set $dx_tracked_changed os_dx_3_red})
               (2 {set $dx_tracked_changed os_dx_3_yellow})
               (3 {set $dx_tracked_changed os_dx_3_blue})
               (4 {set $dx_tracked_changed os_dx_3_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_GEM_COLOR_LIST
            {set $previous_state dxState_GuitarGemColorSelector}
         )
         (
            (
               os_dx_4_green
               os_dx_4_red
               os_dx_4_yellow
               os_dx_4_blue
               os_dx_4_orange
            )
            {set $dx_guitar_gem_color4 {mod {+ $dx_guitar_gem_color4 1} 5}}
            {switch $dx_guitar_gem_color4
               (0 {set $dx_tracked_changed os_dx_4_green})
               (1 {set $dx_tracked_changed os_dx_4_red})
               (2 {set $dx_tracked_changed os_dx_4_yellow})
               (3 {set $dx_tracked_changed os_dx_4_blue})
               (4 {set $dx_tracked_changed os_dx_4_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_GEM_COLOR_LIST
            {set $previous_state dxState_GuitarGemColorSelector}
         )
         (
            (
               os_dx_5_green
               os_dx_5_red
               os_dx_5_yellow
               os_dx_5_blue
               os_dx_5_orange
            )
            {set $dx_guitar_gem_color5 {mod {+ $dx_guitar_gem_color5 1} 5}}
            {switch $dx_guitar_gem_color5
               (0 {set $dx_tracked_changed os_dx_5_green})
               (1 {set $dx_tracked_changed os_dx_5_red})
               (2 {set $dx_tracked_changed os_dx_5_yellow})
               (3 {set $dx_tracked_changed os_dx_5_blue})
               (4 {set $dx_tracked_changed os_dx_5_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_GEM_COLOR_LIST
            {set $previous_state dxState_GuitarGemColorSelector}
         )
      }
      {set $in_state FALSE}
      DX_GUITAR_GEM_COLOR_LIST
      {set $previous_state dxState_GuitarGemColorSelector}
   )
   (exit
      {dx_state_pos_tracker}
   )
   (on_cancel
      {$this show_state dxState_GuitarColorSelector}
   )
)

#define DX_GUITAR_SUSTAIN_COLOR_LIST
(
   {do
      ($options {array 0})
      {switch $dx_guitar_sustain_color1
         (0 {push_back $options os_dx_1_green})
         (1 {push_back $options os_dx_1_red})
         (2 {push_back $options os_dx_1_yellow})
         (3 {push_back $options os_dx_1_blue})
         (4 {push_back $options os_dx_1_orange})
      }
      {switch $dx_guitar_sustain_color2
         (0 {push_back $options os_dx_2_green})
         (1 {push_back $options os_dx_2_red})
         (2 {push_back $options os_dx_2_yellow})
         (3 {push_back $options os_dx_2_blue})
         (4 {push_back $options os_dx_2_orange})
      }
      {switch $dx_guitar_sustain_color3
         (0 {push_back $options os_dx_3_green})
         (1 {push_back $options os_dx_3_red})
         (2 {push_back $options os_dx_3_yellow})
         (3 {push_back $options os_dx_3_blue})
         (4 {push_back $options os_dx_3_orange})
      }
      {switch $dx_guitar_sustain_color4
         (0 {push_back $options os_dx_4_green})
         (1 {push_back $options os_dx_4_red})
         (2 {push_back $options os_dx_4_yellow})
         (3 {push_back $options os_dx_4_blue})
         (4 {push_back $options os_dx_4_orange})
      }
      {switch $dx_guitar_sustain_color5
         (0 {push_back $options os_dx_5_green})
         (1 {push_back $options os_dx_5_red})
         (2 {push_back $options os_dx_5_yellow})
         (3 {push_back $options os_dx_5_blue})
         (4 {push_back $options os_dx_5_orange})
      }
      ;-----func----------state name---------message
      {dx_state_setup dxState_GuitarSustainColorSelector FALSE}
   }
)

(dxState_GuitarSustainColorSelector
   (view
      DX_GUITAR_SUSTAIN_COLOR_LIST
      {dx_state_setup dxState_GuitarSustainColorSelector FALSE}
      {overshell_view_chooser}
   )
   (SELECT_MSG
      {switch {$component selected_sym}
         (
            (
               os_dx_1_green
               os_dx_1_red
               os_dx_1_yellow
               os_dx_1_blue
               os_dx_1_orange
            )
            {set $dx_guitar_sustain_color1 {mod {+ $dx_guitar_sustain_color1 1} 5}}
            {switch $dx_guitar_sustain_color1
               (0 {set $dx_tracked_changed os_dx_1_green})
               (1 {set $dx_tracked_changed os_dx_1_red})
               (2 {set $dx_tracked_changed os_dx_1_yellow})
               (3 {set $dx_tracked_changed os_dx_1_blue})
               (4 {set $dx_tracked_changed os_dx_1_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_SUSTAIN_COLOR_LIST
            {set $previous_state dxState_GuitarSustainColorSelector}
         )
         (
            (
               os_dx_2_green
               os_dx_2_red
               os_dx_2_yellow
               os_dx_2_blue
               os_dx_2_orange
            )
            {set $dx_guitar_sustain_color2 {mod {+ $dx_guitar_sustain_color2 1} 5}}
            {switch $dx_guitar_sustain_color2
               (0 {set $dx_tracked_changed os_dx_2_green})
               (1 {set $dx_tracked_changed os_dx_2_red})
               (2 {set $dx_tracked_changed os_dx_2_yellow})
               (3 {set $dx_tracked_changed os_dx_2_blue})
               (4 {set $dx_tracked_changed os_dx_2_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_SUSTAIN_COLOR_LIST
            {set $previous_state dxState_GuitarSustainColorSelector}
         )
         (
            (
               os_dx_3_green
               os_dx_3_red
               os_dx_3_yellow
               os_dx_3_blue
               os_dx_3_orange
            )
            {set $dx_guitar_sustain_color3 {mod {+ $dx_guitar_sustain_color3 1} 5}}
            {switch $dx_guitar_sustain_color3
               (0 {set $dx_tracked_changed os_dx_3_green})
               (1 {set $dx_tracked_changed os_dx_3_red})
               (2 {set $dx_tracked_changed os_dx_3_yellow})
               (3 {set $dx_tracked_changed os_dx_3_blue})
               (4 {set $dx_tracked_changed os_dx_3_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_SUSTAIN_COLOR_LIST
            {set $previous_state dxState_GuitarSustainColorSelector}
         )
         (
            (
               os_dx_4_green
               os_dx_4_red
               os_dx_4_yellow
               os_dx_4_blue
               os_dx_4_orange
            )
            {set $dx_guitar_sustain_color4 {mod {+ $dx_guitar_sustain_color4 1} 5}}
            {switch $dx_guitar_sustain_color4
               (0 {set $dx_tracked_changed os_dx_4_green})
               (1 {set $dx_tracked_changed os_dx_4_red})
               (2 {set $dx_tracked_changed os_dx_4_yellow})
               (3 {set $dx_tracked_changed os_dx_4_blue})
               (4 {set $dx_tracked_changed os_dx_4_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_SUSTAIN_COLOR_LIST
            {set $previous_state dxState_GuitarSustainColorSelector}
         )
         (
            (
               os_dx_5_green
               os_dx_5_red
               os_dx_5_yellow
               os_dx_5_blue
               os_dx_5_orange
            )
            {set $dx_guitar_sustain_color5 {mod {+ $dx_guitar_sustain_color5 1} 5}}
            {switch $dx_guitar_sustain_color5
               (0 {set $dx_tracked_changed os_dx_5_green})
               (1 {set $dx_tracked_changed os_dx_5_red})
               (2 {set $dx_tracked_changed os_dx_5_yellow})
               (3 {set $dx_tracked_changed os_dx_5_blue})
               (4 {set $dx_tracked_changed os_dx_5_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_SUSTAIN_COLOR_LIST
            {set $previous_state dxState_GuitarSustainColorSelector}
         )
      }
      {set $in_state FALSE}
      DX_GUITAR_SUSTAIN_COLOR_LIST
      {set $previous_state dxState_GuitarSustainColorSelector}
   )
   (exit
      {dx_state_pos_tracker}
   )
   (on_cancel
      {$this show_state dxState_GuitarColorSelector}
   )
)

#define DX_GUITAR_SMASHER_COLOR_LIST
(
   {do
      ($options {array 0})
      {switch $dx_guitar_smasher_color1
         (0 {push_back $options os_dx_1_green})
         (1 {push_back $options os_dx_1_red})
         (2 {push_back $options os_dx_1_yellow})
         (3 {push_back $options os_dx_1_blue})
         (4 {push_back $options os_dx_1_orange})
      }
      {switch $dx_guitar_smasher_color2
         (0 {push_back $options os_dx_2_green})
         (1 {push_back $options os_dx_2_red})
         (2 {push_back $options os_dx_2_yellow})
         (3 {push_back $options os_dx_2_blue})
         (4 {push_back $options os_dx_2_orange})
      }
      {switch $dx_guitar_smasher_color3
         (0 {push_back $options os_dx_3_green})
         (1 {push_back $options os_dx_3_red})
         (2 {push_back $options os_dx_3_yellow})
         (3 {push_back $options os_dx_3_blue})
         (4 {push_back $options os_dx_3_orange})
      }
      {switch $dx_guitar_smasher_color4
         (0 {push_back $options os_dx_4_green})
         (1 {push_back $options os_dx_4_red})
         (2 {push_back $options os_dx_4_yellow})
         (3 {push_back $options os_dx_4_blue})
         (4 {push_back $options os_dx_4_orange})
      }
      {switch $dx_guitar_smasher_color5
         (0 {push_back $options os_dx_5_green})
         (1 {push_back $options os_dx_5_red})
         (2 {push_back $options os_dx_5_yellow})
         (3 {push_back $options os_dx_5_blue})
         (4 {push_back $options os_dx_5_orange})
      }
      ;-----func----------state name---------message
      {dx_state_setup dxState_GuitarSmasherColorSelector FALSE}
   }
)

(dxState_GuitarSmasherColorSelector
   (view
      DX_GUITAR_SMASHER_COLOR_LIST
      {dx_state_setup dxState_GuitarSmasherColorSelector FALSE}
      {overshell_view_chooser}
   )
   (SELECT_MSG
      {switch {$component selected_sym}
         (
            (
               os_dx_1_green
               os_dx_1_red
               os_dx_1_yellow
               os_dx_1_blue
               os_dx_1_orange
            )
            {set $dx_guitar_smasher_color1 {mod {+ $dx_guitar_smasher_color1 1} 5}}
            {switch $dx_guitar_smasher_color1
               (0 {set $dx_tracked_changed os_dx_1_green})
               (1 {set $dx_tracked_changed os_dx_1_red})
               (2 {set $dx_tracked_changed os_dx_1_yellow})
               (3 {set $dx_tracked_changed os_dx_1_blue})
               (4 {set $dx_tracked_changed os_dx_1_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_SMASHER_COLOR_LIST
            {set $previous_state dxState_GuitarSmasherColorSelector}
         )
         (
            (
               os_dx_2_green
               os_dx_2_red
               os_dx_2_yellow
               os_dx_2_blue
               os_dx_2_orange
            )
            {set $dx_guitar_smasher_color2 {mod {+ $dx_guitar_smasher_color2 1} 5}}
            {switch $dx_guitar_smasher_color2
               (0 {set $dx_tracked_changed os_dx_2_green})
               (1 {set $dx_tracked_changed os_dx_2_red})
               (2 {set $dx_tracked_changed os_dx_2_yellow})
               (3 {set $dx_tracked_changed os_dx_2_blue})
               (4 {set $dx_tracked_changed os_dx_2_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_SMASHER_COLOR_LIST
            {set $previous_state dxState_GuitarSmasherColorSelector}
         )
         (
            (
               os_dx_3_green
               os_dx_3_red
               os_dx_3_yellow
               os_dx_3_blue
               os_dx_3_orange
            )
            {set $dx_guitar_smasher_color3 {mod {+ $dx_guitar_smasher_color3 1} 5}}
            {switch $dx_guitar_smasher_color3
               (0 {set $dx_tracked_changed os_dx_3_green})
               (1 {set $dx_tracked_changed os_dx_3_red})
               (2 {set $dx_tracked_changed os_dx_3_yellow})
               (3 {set $dx_tracked_changed os_dx_3_blue})
               (4 {set $dx_tracked_changed os_dx_3_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_SMASHER_COLOR_LIST
            {set $previous_state dxState_GuitarSmasherColorSelector}
         )
         (
            (
               os_dx_4_green
               os_dx_4_red
               os_dx_4_yellow
               os_dx_4_blue
               os_dx_4_orange
            )
            {set $dx_guitar_smasher_color4 {mod {+ $dx_guitar_smasher_color4 1} 5}}
            {switch $dx_guitar_smasher_color4
               (0 {set $dx_tracked_changed os_dx_4_green})
               (1 {set $dx_tracked_changed os_dx_4_red})
               (2 {set $dx_tracked_changed os_dx_4_yellow})
               (3 {set $dx_tracked_changed os_dx_4_blue})
               (4 {set $dx_tracked_changed os_dx_4_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_SMASHER_COLOR_LIST
            {set $previous_state dxState_GuitarSmasherColorSelector}
         )
         (
            (
               os_dx_5_green
               os_dx_5_red
               os_dx_5_yellow
               os_dx_5_blue
               os_dx_5_orange
            )
            {set $dx_guitar_smasher_color5 {mod {+ $dx_guitar_smasher_color5 1} 5}}
            {switch $dx_guitar_smasher_color5
               (0 {set $dx_tracked_changed os_dx_5_green})
               (1 {set $dx_tracked_changed os_dx_5_red})
               (2 {set $dx_tracked_changed os_dx_5_yellow})
               (3 {set $dx_tracked_changed os_dx_5_blue})
               (4 {set $dx_tracked_changed os_dx_5_orange})
            }
            {dx_state_pos_tracker}
            DX_GUITAR_SMASHER_COLOR_LIST
            {set $previous_state dxState_GuitarSmasherColorSelector}
         )
      }
      {set $in_state FALSE}
      DX_GUITAR_SMASHER_COLOR_LIST
      {set $previous_state dxState_GuitarSmasherColorSelector}
   )
   (exit
      {dx_state_pos_tracker}
   )
   (on_cancel
      {$this show_state dxState_GuitarColorSelector}
   )
)

(dxState_DrumColorSelector
   (view
      {do
         ($options
            {array 0})
         {push_back $options os_toms}
         {push_back $options os_cymbals}
         {push_back $options os_smashers}
         ;-----func----------state name---------message
         {dx_state_setup dxState_DrumColorSelector FALSE}
      }
      {overshell_view_chooser}
   )
   (SELECT_MSG
      {switch {$component selected_sym}
         (os_toms
            {$this show_state dxState_DrumTomColorSelector}
         )
         (os_cymbals
            {$this show_state dxState_DrumCymbalColorSelector}
         )
         (os_smashers
            {$this show_state dxState_DrumSmasherColorSelector}
         )
      }
   )
   (exit 
      {dx_state_pos_tracker}
   )
   (on_cancel
      {$this show_state dxState_ColorSelector}
   )
)

#define DX_DRUM_TOM_COLOR_LIST
(
   {do
      ($options {array 0})
      {switch $dx_drum_tom_color1
         (0 {push_back $options os_dx_1_red})
         (1 {push_back $options os_dx_1_yellow})
         (2 {push_back $options os_dx_1_blue})
         (3 {push_back $options os_dx_1_green})
      }
      {switch $dx_drum_tom_color2
         (0 {push_back $options os_dx_2_red})
         (1 {push_back $options os_dx_2_yellow})
         (2 {push_back $options os_dx_2_blue})
         (3 {push_back $options os_dx_2_green})
      }
      {switch $dx_drum_tom_color3
         (0 {push_back $options os_dx_3_red})
         (1 {push_back $options os_dx_3_yellow})
         (2 {push_back $options os_dx_3_blue})
         (3 {push_back $options os_dx_3_green})
      }
      {switch $dx_drum_tom_color4
         (0 {push_back $options os_dx_4_red})
         (1 {push_back $options os_dx_4_yellow})
         (2 {push_back $options os_dx_4_blue})
         (3 {push_back $options os_dx_4_green})
      }
      ;-----func----------state name---------message
      {dx_state_setup dxState_DrumTomColorSelector FALSE}
   }
)
(dxState_DrumTomColorSelector
   (view
      DX_DRUM_TOM_COLOR_LIST
      {dx_state_setup dxState_DrumTomColorSelector FALSE}
      {overshell_view_chooser}
   )
   (SELECT_MSG
      {switch {$component selected_sym}
         (
            (
               os_dx_1_red
               os_dx_1_yellow
               os_dx_1_blue
               os_dx_1_green
            )
            {set $dx_drum_tom_color1 {mod {+ $dx_drum_tom_color1 1} 4}}
            {switch $dx_drum_tom_color1
               (0 {set $dx_tracked_changed os_dx_1_red})
               (1 {set $dx_tracked_changed os_dx_1_yellow})
               (2 {set $dx_tracked_changed os_dx_1_blue})
               (3 {set $dx_tracked_changed os_dx_1_green})
            }
            {dx_state_pos_tracker}
            DX_DRUM_TOM_COLOR_LIST
            {set $previous_state dxState_DrumTomColorSelector}
         )
         (
            (
               os_dx_2_red
               os_dx_2_yellow
               os_dx_2_blue
               os_dx_2_green
            )
            {set $dx_drum_tom_color2 {mod {+ $dx_drum_tom_color2 1} 4}}
            {switch $dx_drum_tom_color2
               (0 {set $dx_tracked_changed os_dx_2_red})
               (1 {set $dx_tracked_changed os_dx_2_yellow})
               (2 {set $dx_tracked_changed os_dx_2_blue})
               (3 {set $dx_tracked_changed os_dx_2_green})
            }
            {dx_state_pos_tracker}
            DX_DRUM_TOM_COLOR_LIST
            {set $previous_state dxState_DrumTomColorSelector}
         )
         (
            (
               os_dx_3_red
               os_dx_3_yellow
               os_dx_3_blue
               os_dx_3_green
            )
            {set $dx_drum_tom_color3 {mod {+ $dx_drum_tom_color3 1} 4}}
            {switch $dx_drum_tom_color3
               (0 {set $dx_tracked_changed os_dx_3_red})
               (1 {set $dx_tracked_changed os_dx_3_yellow})
               (2 {set $dx_tracked_changed os_dx_3_blue})
               (3 {set $dx_tracked_changed os_dx_3_green})
            }
            {dx_state_pos_tracker}
            DX_DRUM_TOM_COLOR_LIST
            {set $previous_state dxState_DrumTomColorSelector}
         )
         (
            (
               os_dx_4_red
               os_dx_4_yellow
               os_dx_4_blue
               os_dx_4_green
            )
            {set $dx_drum_tom_color4 {mod {+ $dx_drum_tom_color4 1} 4}}
            {switch $dx_drum_tom_color4
               (0 {set $dx_tracked_changed os_dx_4_red})
               (1 {set $dx_tracked_changed os_dx_4_yellow})
               (2 {set $dx_tracked_changed os_dx_4_blue})
               (3 {set $dx_tracked_changed os_dx_4_green})
            }
            {dx_state_pos_tracker}
            DX_DRUM_TOM_COLOR_LIST
            {set $previous_state dxState_DrumTomColorSelector}
         )
      }
      {set $in_state FALSE}
      DX_DRUM_TOM_COLOR_LIST
      {set $previous_state dxState_DrumTomColorSelector}
   )
   (exit
      {dx_state_pos_tracker}
   )
   (on_cancel
      {$this show_state dxState_DrumColorSelector}
   )
)

#define DX_DRUM_CYMBAL_COLOR_LIST
(
   {do
      ($options {array 0})
      {switch $dx_drum_cymbal_color1
         (0 {push_back $options os_dx_1_red})
         (1 {push_back $options os_dx_1_yellow})
         (2 {push_back $options os_dx_1_blue})
         (3 {push_back $options os_dx_1_green})
      }
      {switch $dx_drum_cymbal_color2
         (0 {push_back $options os_dx_2_red})
         (1 {push_back $options os_dx_2_yellow})
         (2 {push_back $options os_dx_2_blue})
         (3 {push_back $options os_dx_2_green})
      }
      {switch $dx_drum_cymbal_color3
         (0 {push_back $options os_dx_3_red})
         (1 {push_back $options os_dx_3_yellow})
         (2 {push_back $options os_dx_3_blue})
         (3 {push_back $options os_dx_3_green})
      }
      {switch $dx_drum_cymbal_color4
         (0 {push_back $options os_dx_4_red})
         (1 {push_back $options os_dx_4_yellow})
         (2 {push_back $options os_dx_4_blue})
         (3 {push_back $options os_dx_4_green})
      }
      ;-----func----------state name---------message
      {dx_state_setup dxState_DrumCymbalColorSelector FALSE}
   }
)
(dxState_DrumCymbalColorSelector
   (view
      DX_DRUM_CYMBAL_COLOR_LIST
      {dx_state_setup dxState_DrumCymbalColorSelector FALSE}
      {overshell_view_chooser}
   )
   (SELECT_MSG
      {switch {$component selected_sym}
         (
            (
               os_dx_1_red
               os_dx_1_yellow
               os_dx_1_blue
               os_dx_1_green
            )
            {set $dx_drum_cymbal_color1 {mod {+ $dx_drum_cymbal_color1 1} 4}}
            {switch $dx_drum_cymbal_color1
               (0 {set $dx_tracked_changed os_dx_1_red})
               (1 {set $dx_tracked_changed os_dx_1_yellow})
               (2 {set $dx_tracked_changed os_dx_1_blue})
               (3 {set $dx_tracked_changed os_dx_1_green})
            }
            {dx_state_pos_tracker}
            DX_DRUM_CYMBAL_COLOR_LIST
            {set $previous_state dxState_DrumCymbalColorSelector}
         )
         (
            (
               os_dx_2_red
               os_dx_2_yellow
               os_dx_2_blue
               os_dx_2_green
            )
            {set $dx_drum_cymbal_color2 {mod {+ $dx_drum_cymbal_color2 1} 4}}
            {switch $dx_drum_cymbal_color2
               (0 {set $dx_tracked_changed os_dx_2_red})
               (1 {set $dx_tracked_changed os_dx_2_yellow})
               (2 {set $dx_tracked_changed os_dx_2_blue})
               (3 {set $dx_tracked_changed os_dx_2_green})
            }
            {dx_state_pos_tracker}
            DX_DRUM_CYMBAL_COLOR_LIST
            {set $previous_state dxState_DrumCymbalColorSelector}
         )
         (
            (
               os_dx_3_red
               os_dx_3_yellow
               os_dx_3_blue
               os_dx_3_green
            )
            {set $dx_drum_cymbal_color3 {mod {+ $dx_drum_cymbal_color3 1} 4}}
            {switch $dx_drum_cymbal_color3
               (0 {set $dx_tracked_changed os_dx_3_red})
               (1 {set $dx_tracked_changed os_dx_3_yellow})
               (2 {set $dx_tracked_changed os_dx_3_blue})
               (3 {set $dx_tracked_changed os_dx_3_green})
            }
            {dx_state_pos_tracker}
            DX_DRUM_CYMBAL_COLOR_LIST
            {set $previous_state dxState_DrumCymbalColorSelector}
         )
         (
            (
               os_dx_4_red
               os_dx_4_yellow
               os_dx_4_blue
               os_dx_4_green
            )
            {set $dx_drum_cymbal_color4 {mod {+ $dx_drum_cymbal_color4 1} 4}}
            {switch $dx_drum_cymbal_color4
               (0 {set $dx_tracked_changed os_dx_4_red})
               (1 {set $dx_tracked_changed os_dx_4_yellow})
               (2 {set $dx_tracked_changed os_dx_4_blue})
               (3 {set $dx_tracked_changed os_dx_4_green})
            }
            {dx_state_pos_tracker}
            DX_DRUM_CYMBAL_COLOR_LIST
            {set $previous_state dxState_DrumCymbalColorSelector}
         )
      }
      {set $in_state FALSE}
      DX_DRUM_CYMBAL_COLOR_LIST
      {set $previous_state dxState_DrumCymbalColorSelector}
   )
   (exit
      {dx_state_pos_tracker}
   )
   (on_cancel
      {$this show_state dxState_DrumColorSelector}
   )
)

#define DX_DRUM_SMASHER_COLOR_LIST
(
   {do
      ($options {array 0})
      {switch $dx_drum_smasher_color1
         (0 {push_back $options os_dx_1_red})
         (1 {push_back $options os_dx_1_yellow})
         (2 {push_back $options os_dx_1_blue})
         (3 {push_back $options os_dx_1_green})
      }
      {switch $dx_drum_smasher_color2
         (0 {push_back $options os_dx_2_red})
         (1 {push_back $options os_dx_2_yellow})
         (2 {push_back $options os_dx_2_blue})
         (3 {push_back $options os_dx_2_green})
      }
      {switch $dx_drum_smasher_color3
         (0 {push_back $options os_dx_3_red})
         (1 {push_back $options os_dx_3_yellow})
         (2 {push_back $options os_dx_3_blue})
         (3 {push_back $options os_dx_3_green})
      }
      {switch $dx_drum_smasher_color4
         (0 {push_back $options os_dx_4_red})
         (1 {push_back $options os_dx_4_yellow})
         (2 {push_back $options os_dx_4_blue})
         (3 {push_back $options os_dx_4_green})
      }
      ;-----func----------state name---------message
      {dx_state_setup dxState_DrumSmasherColorSelector FALSE}
   }
)
(dxState_DrumSmasherColorSelector
   (view
      DX_DRUM_SMASHER_COLOR_LIST
      {dx_state_setup dxState_DrumSmasherColorSelector FALSE}
      {overshell_view_chooser}
   )
   (SELECT_MSG
      {switch {$component selected_sym}
         (
            (
               os_dx_1_red
               os_dx_1_yellow
               os_dx_1_blue
               os_dx_1_green
            )
            {set $dx_drum_smasher_color1 {mod {+ $dx_drum_smasher_color1 1} 4}}
            {switch $dx_drum_smasher_color1
               (0 {set $dx_tracked_changed os_dx_1_red})
               (1 {set $dx_tracked_changed os_dx_1_yellow})
               (2 {set $dx_tracked_changed os_dx_1_blue})
               (3 {set $dx_tracked_changed os_dx_1_green})
            }
            {dx_state_pos_tracker}
            DX_DRUM_SMASHER_COLOR_LIST
            {set $previous_state dxState_DrumSmasherColorSelector}
         )
         (
            (
               os_dx_2_red
               os_dx_2_yellow
               os_dx_2_blue
               os_dx_2_green
            )
            {set $dx_drum_smasher_color2 {mod {+ $dx_drum_smasher_color2 1} 4}}
            {switch $dx_drum_smasher_color2
               (0 {set $dx_tracked_changed os_dx_2_red})
               (1 {set $dx_tracked_changed os_dx_2_yellow})
               (2 {set $dx_tracked_changed os_dx_2_blue})
               (3 {set $dx_tracked_changed os_dx_2_green})
            }
            {dx_state_pos_tracker}
            DX_DRUM_SMASHER_COLOR_LIST
            {set $previous_state dxState_DrumSmasherColorSelector}
         )
         (
            (
               os_dx_3_red
               os_dx_3_yellow
               os_dx_3_blue
               os_dx_3_green
            )
            {set $dx_drum_smasher_color3 {mod {+ $dx_drum_smasher_color3 1} 4}}
            {switch $dx_drum_smasher_color3
               (0 {set $dx_tracked_changed os_dx_3_red})
               (1 {set $dx_tracked_changed os_dx_3_yellow})
               (2 {set $dx_tracked_changed os_dx_3_blue})
               (3 {set $dx_tracked_changed os_dx_3_green})
            }
            {dx_state_pos_tracker}
            DX_DRUM_SMASHER_COLOR_LIST
            {set $previous_state dxState_DrumSmasherColorSelector}
         )
         (
            (
               os_dx_4_red
               os_dx_4_yellow
               os_dx_4_blue
               os_dx_4_green
            )
            {set $dx_drum_smasher_color4 {mod {+ $dx_drum_smasher_color4 1} 4}}
            {switch $dx_drum_smasher_color4
               (0 {set $dx_tracked_changed os_dx_4_red})
               (1 {set $dx_tracked_changed os_dx_4_yellow})
               (2 {set $dx_tracked_changed os_dx_4_blue})
               (3 {set $dx_tracked_changed os_dx_4_green})
            }
            {dx_state_pos_tracker}
            DX_DRUM_SMASHER_COLOR_LIST
            {set $previous_state dxState_DrumSmasherColorSelector}
         )
      }
      {set $in_state FALSE}
      DX_DRUM_SMASHER_COLOR_LIST
      {set $previous_state dxState_DrumSmasherColorSelector}
   )
   (exit
      {dx_state_pos_tracker}
   )
   (on_cancel
      {$this show_state dxState_DrumColorSelector}
   )
)

#define DX_PROTAR_GEM_COLOR_LIST
(
   {do
      ($options {array 0})
      {switch $dx_protar_color1
         (0 {push_back $options os_dx_1_red})
         (1 {push_back $options os_dx_1_green})
         (2 {push_back $options os_dx_1_orange})
         (3 {push_back $options os_dx_1_blue})
         (4 {push_back $options os_dx_1_yellow})
         (5 {push_back $options os_dx_1_purple})
      }
      {switch $dx_protar_color2
         (0 {push_back $options os_dx_2_red})
         (1 {push_back $options os_dx_2_green})
         (2 {push_back $options os_dx_2_orange})
         (3 {push_back $options os_dx_2_blue})
         (4 {push_back $options os_dx_2_yellow})
         (5 {push_back $options os_dx_2_purple})
      }
      {switch $dx_protar_color3
         (0 {push_back $options os_dx_3_red})
         (1 {push_back $options os_dx_3_green})
         (2 {push_back $options os_dx_3_orange})
         (3 {push_back $options os_dx_3_blue})
         (4 {push_back $options os_dx_3_yellow})
         (5 {push_back $options os_dx_3_purple})
      }
      {switch $dx_protar_color4
         (0 {push_back $options os_dx_4_red})
         (1 {push_back $options os_dx_4_green})
         (2 {push_back $options os_dx_4_orange})
         (3 {push_back $options os_dx_4_blue})
         (4 {push_back $options os_dx_4_yellow})
         (5 {push_back $options os_dx_4_purple})
      }
      {switch $dx_protar_color5
         (0 {push_back $options os_dx_5_red})
         (1 {push_back $options os_dx_5_green})
         (2 {push_back $options os_dx_5_orange})
         (3 {push_back $options os_dx_5_blue})
         (4 {push_back $options os_dx_5_yellow})
         (5 {push_back $options os_dx_5_purple})
      }
      {switch $dx_protar_color6
         (0 {push_back $options os_dx_6_red})
         (1 {push_back $options os_dx_6_green})
         (2 {push_back $options os_dx_6_orange})
         (3 {push_back $options os_dx_6_blue})
         (4 {push_back $options os_dx_6_yellow})
         (5 {push_back $options os_dx_6_purple})
      }
      ;-----func----------state name---------message
      {dx_state_setup dxState_ProtarColorSelector FALSE}
   }
)
(dxState_ProtarColorSelector
   (view
      DX_PROTAR_GEM_COLOR_LIST
      {dx_state_setup dxState_ProtarColorSelector FALSE}
      {overshell_view_chooser}
   )
   (SELECT_MSG
      {switch {$component selected_sym}
         (
            (
               os_dx_1_red
               os_dx_1_green
               os_dx_1_orange
               os_dx_1_blue
               os_dx_1_yellow
               os_dx_1_purple
            )
            {set $dx_protar_color1 {mod {+ $dx_protar_color1 1} 6}}
            {switch $dx_protar_color1
               (0 {set $dx_tracked_changed os_dx_1_red})
               (1 {set $dx_tracked_changed os_dx_1_green})
               (2 {set $dx_tracked_changed os_dx_1_orange})
               (3 {set $dx_tracked_changed os_dx_1_blue})
               (4 {set $dx_tracked_changed os_dx_1_yellow})
               (5 {set $dx_tracked_changed os_dx_1_purple})
            }
            {dx_state_pos_tracker}
            DX_PROTAR_GEM_COLOR_LIST
            {set $previous_state dxState_ProtarColorSelector}
         )
         (
            (
               os_dx_2_red
               os_dx_2_green
               os_dx_2_orange
               os_dx_2_blue
               os_dx_2_yellow
               os_dx_2_purple
            )
            {set $dx_protar_color2 {mod {+ $dx_protar_color2 1} 6}}
            {switch $dx_protar_color2
               (0 {set $dx_tracked_changed os_dx_2_red})
               (1 {set $dx_tracked_changed os_dx_2_green})
               (2 {set $dx_tracked_changed os_dx_2_orange})
               (3 {set $dx_tracked_changed os_dx_2_blue})
               (4 {set $dx_tracked_changed os_dx_2_yellow})
               (5 {set $dx_tracked_changed os_dx_2_purple})
            }
            {dx_state_pos_tracker}
            DX_PROTAR_GEM_COLOR_LIST
            {set $previous_state dxState_ProtarColorSelector}
         )
         (
            (
               os_dx_3_red
               os_dx_3_green
               os_dx_3_orange
               os_dx_3_blue
               os_dx_3_yellow
               os_dx_3_purple
            )
            {set $dx_protar_color3 {mod {+ $dx_protar_color3 1} 6}}
            {switch $dx_protar_color3
               (0 {set $dx_tracked_changed os_dx_3_red})
               (1 {set $dx_tracked_changed os_dx_3_green})
               (2 {set $dx_tracked_changed os_dx_3_orange})
               (3 {set $dx_tracked_changed os_dx_3_blue})
               (4 {set $dx_tracked_changed os_dx_3_yellow})
               (5 {set $dx_tracked_changed os_dx_3_purple})
            }
            {dx_state_pos_tracker}
            DX_PROTAR_GEM_COLOR_LIST
            {set $previous_state dxState_ProtarColorSelector}
         )
         (
            (
               os_dx_4_red
               os_dx_4_green
               os_dx_4_orange
               os_dx_4_blue
               os_dx_4_yellow
               os_dx_4_purple
            )
            {set $dx_protar_color4 {mod {+ $dx_protar_color4 1} 6}}
            {switch $dx_protar_color4
               (0 {set $dx_tracked_changed os_dx_4_red})
               (1 {set $dx_tracked_changed os_dx_4_green})
               (2 {set $dx_tracked_changed os_dx_4_orange})
               (3 {set $dx_tracked_changed os_dx_4_blue})
               (4 {set $dx_tracked_changed os_dx_4_yellow})
               (5 {set $dx_tracked_changed os_dx_4_purple})
            }
            {dx_state_pos_tracker}
            DX_PROTAR_GEM_COLOR_LIST
            {set $previous_state dxState_ProtarColorSelector}
         )
         (
            (
               os_dx_5_red
               os_dx_5_green
               os_dx_5_orange
               os_dx_5_blue
               os_dx_5_yellow
               os_dx_5_purple
            )
            {set $dx_protar_color5 {mod {+ $dx_protar_color5 1} 6}}
            {switch $dx_protar_color5
               (0 {set $dx_tracked_changed os_dx_5_red})
               (1 {set $dx_tracked_changed os_dx_5_green})
               (2 {set $dx_tracked_changed os_dx_5_orange})
               (3 {set $dx_tracked_changed os_dx_5_blue})
               (4 {set $dx_tracked_changed os_dx_5_yellow})
               (5 {set $dx_tracked_changed os_dx_5_purple})
            }
            {dx_state_pos_tracker}
            DX_PROTAR_GEM_COLOR_LIST
            {set $previous_state dxState_ProtarColorSelector}
         )
         (
            (
               os_dx_6_red
               os_dx_6_green
               os_dx_6_orange
               os_dx_6_blue
               os_dx_6_yellow
               os_dx_6_purple
            )
            {set $dx_protar_color6 {mod {+ $dx_protar_color6 1} 6}}
            {switch $dx_protar_color6
               (0 {set $dx_tracked_changed os_dx_6_red})
               (1 {set $dx_tracked_changed os_dx_6_green})
               (2 {set $dx_tracked_changed os_dx_6_orange})
               (3 {set $dx_tracked_changed os_dx_6_blue})
               (4 {set $dx_tracked_changed os_dx_6_yellow})
               (5 {set $dx_tracked_changed os_dx_6_purple})
            }
            {dx_state_pos_tracker}
            DX_PROTAR_GEM_COLOR_LIST
            {set $previous_state dxState_ProtarColorSelector}
         )
      }
      {set $in_state FALSE}
      DX_PROTAR_GEM_COLOR_LIST
      {set $previous_state dxState_ProtarColorSelector}
   )
   (exit
      {dx_state_pos_tracker}
   )
	(on_cancel
      {$this show_state dxState_ColorSelector}
   )
)

;overdrive

(dxState_rgbcolormenu
   (view online_options)
   (enter
   {set $dx_track_to_reset_choose_character_texture TRUE}
   {set $dx_slider TRUE}
   {set $dx_slider_id dx_rgbcolormenu}
   {online_options.lst set_selected $colormenuval}
   {online_options.grp add_object choose_character.mesh}
   {store_choose_char_size_pos}
   {choose_character.mesh set_local_pos_index 0 25}
   {choose_character.mesh set_local_pos_index 2 175}
   {choose_character.mesh set_local_scale_index 0 0.2}
   {choose_character.mesh set_local_scale_index 2 0.4}
   {choose_character.mat set diffuse_tex choose_character.tex}
   {choose_character.tex set_bitmap {sprint "dx/custom_textures/overdrive/_1_rb3_guitar.png"}}
   {choose_character.tex iterate_refs $ref {$ref set color {pack_color $dx_overdrive_r $dx_overdrive_g $dx_overdrive_b}}}
   {choose_character.tex iterate_refs $ref {$ref set intensify TRUE}}
   {instruments.sld set_num_steps 101}
   {bg_music.sld set_num_steps 101}
   {crowd.sld set_num_steps 101}
   {instruments.sld set_current {int {* $dx_overdrive_r 100}}}
   {bg_music.sld set_current {int {* $dx_overdrive_g 100}}}
   {crowd.sld set_current {int {* $dx_overdrive_b 100}}}
   {trackspeed_msg set_token_fmt {sprint {localize color_msg} " " $dx_overdrive_r  ", " $dx_overdrive_g ", " $dx_overdrive_b}}
   {speed_msg.lbl set_token_fmt {sprint {localize color_msg} " " $dx_overdrive_r  ", " $dx_overdrive_g ", " $dx_overdrive_b}}
   {fps_msg set_token_fmt {sprint {localize color_msg} " " $dx_overdrive_r  ", " $dx_overdrive_g ", " $dx_overdrive_b}}
   {online_options.lst set_data 
   (
      os_default
      os_color_r
      os_color_g
      os_color_b
   )})
  (update_view
      {handle
         ($this
            update_slider
            instruments.sld
            "")}
      {handle
         ($this
            update_slider
            bg_music.sld
            "")}
      {handle
         ($this
            update_slider
            crowd.sld
            "")}
      {handle
         ($this
            update_slider
            sfx.sld
            "")}
      {handle
         ($this
            update_slider
            voice_chat.sld
            "")})
   (SELECT_MSG
   {set $colormenuval {$component selected_sym}}
  {switch
   {$component selected_sym}
   (os_color_r
      {set $colorrslider TRUE}
      {instruments.sld store}
      {instruments.sld set_showing TRUE}
      {$this set_focus instruments.sld})
   (os_color_g
      {set $colorgslider TRUE}
    {bg_music.sld store}
    {bg_music.sld set_showing TRUE}
    {$this set_focus bg_music.sld})
   (os_color_b
      {set $colorbslider TRUE}
      {crowd.sld store}
      {crowd.sld set_showing TRUE}
      {$this set_focus crowd.sld})
    (os_default
      {set $dx_overdrive_r 0.71} {set $dx_overdrive_g 0.54} {set $dx_overdrive_b 0.0}
      {do {$this show_state dxState_colorbSliderMsg} {$this set_focus confirm_action.lst}})
   })
(BUTTON_DOWN_MSG
      {if_else
         {find_elem
            ("instruments.sld"
               "bg_music.sld"
               "crowd.sld")
            {$this focus_name}}
         {switch
            $action
            ((kAction_Confirm kAction_Cancel)
               {{$this
                     find
                     {$this focus_name}}
                  confirm}
               {{$this
                     find
                     {$this focus_name}}
                  set_showing
                  FALSE}
               {if_else $colorrslider
                  {do {$this show_state dxState_colorrSliderMsg} {$this set_focus confirm_action.lst}}
               {if_else $colorgslider
                  {do {$this show_state dxState_colorgSliderMsg} {$this set_focus confirm_action.lst}}
               {if_else $colorbslider
                  {do {$this show_state dxState_colorbSliderMsg} {$this set_focus confirm_action.lst}}
                  {$this set_focus options_audio.lst}}}})
            kDataUnhandled}
         kDataUnhandled})
   (SCROLL_SELECT_MSG
      {$this on_slider_change $component $user}
      {choose_character.tex iterate_refs $ref {$ref set color {pack_color $dx_overdrive_r $dx_overdrive_g $dx_overdrive_b}}})
   (SCROLL_MSG
      {$this on_slider_change $component $user}
      {choose_character.tex iterate_refs $ref {$ref set color {pack_color $dx_overdrive_r $dx_overdrive_g $dx_overdrive_b}}})
 (exit
  {set $dx_slider FALSE})
 (on_cancel
  {dx_overdrive_color_var_reset}
  {restore_choose_char_size_pos}
  {online_options.grp remove_object choose_character.mesh}
  {$this show_state dxState_ColorSelector}))

(dxState_colorrSliderMsg
   (view confirm_action)
   (enter
      {handle
         ($this set_confirm_message {sprint {localize color_msg} " " $dx_overdrive_r  ", " $dx_overdrive_g ", " $dx_overdrive_b})})
   (SELECT_MSG
      {set $colorrslider FALSE}
      {$this show_state dxState_rgbcolormenu}))

(dxState_colorgSliderMsg
   (view confirm_action)
   (enter
      {handle
         ($this set_confirm_message {sprint {localize color_msg} " " $dx_overdrive_r  ", " $dx_overdrive_g ", " $dx_overdrive_b})})
   (SELECT_MSG
      {set $colorrslider FALSE}
      {$this show_state dxState_rgbcolormenu}))

(dxState_colorbSliderMsg
   (view confirm_action)
   (enter
      {choose_character.tex iterate_refs $ref {$ref set color {pack_color $dx_overdrive_r $dx_overdrive_g $dx_overdrive_b}}}
      {handle
         ($this set_confirm_message {sprint {localize color_msg} " " $dx_overdrive_r  ", " $dx_overdrive_g ", " $dx_overdrive_b})})
   (SELECT_MSG
      {set $colorrslider FALSE}
      {$this show_state dxState_rgbcolormenu}))